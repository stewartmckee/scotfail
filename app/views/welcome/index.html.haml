%h1.pagetitle
  How we doing today #scotfail?

#loading
  %img{:src => "/assets/ajax-loader.gif"}
#responsive_part.hidden
  .logo
    %a{:href => "index.html"}
  %ul.nav.responsive
    %li
      %btn.btn.btn-la1rge.btn-i1nfo.responsive_menu.icon_item{"data-target" => "#sidebar", "data-toggle" => "collapse"}
        %i.icon-reorder
/ Responsive part
#sidebar.collapse.hidden
  .logo
    %a{:href => "index.html"}
  %ul#sidebar_menu.navbar.nav.nav-list.sidebar_box
    %li.accordion-group.active
      %a.dashboard{:href => "index.html"}
        %img{:src => "/assets/menu_icons/dashboard.png"} Dashboard
    %li.accordion-group
      %a.accordion-toggle.widgets.collapsed{"data-parent" => "#sidebar_menu", "data-toggle" => "collapse", :href => "#collapse1"}
        %img{:src => "/assets/menu_icons/forms.png"} Form Elements
      %ul#collapse1.accordion-body.collapse
        %li
          %a{:href => "forms_general.html"} General
        %li
          %a{:href => "forms_validation.html"} Validation
        %li
          %a{:href => "forms_editor.html"} Editor
    %li.accordion-group
      %a.accordion-toggle.widgets.collapsed{"data-parent" => "#sidebar_menu", "data-toggle" => "collapse", :href => "#collapse2"}
        %img{:src => "/assets/menu_icons/widgets.png"} UI Widgets
      %ul#collapse2.accordion-body.collapse
        %li
          %a{:href => "ui_buttons.html"} Buttons
        %li
          %a{:href => "ui_dialogs.html"} Dialogs
        %li
          %a{:href => "ui_icons.html"} Icons
        %li
          %a{:href => "ui_tabs.html"} Tabs
        %li
          %a{:href => "ui_accordion.html"} Accordion
    %li
      %a.widgets{:href => "calendar2.html"}
        %img{:src => "/assets/menu_icons/calendar.png"} Calendar
    %li
      %a.widgets{"data-parent" => "#sidebar_menu", :href => "maps.html"}
        %img{:src => "/assets/menu_icons/maps.png"} Maps
    %li.accordion-group
      %a.accordion-toggle.widgets.collapsed{"data-parent" => "#sidebar_menu", "data-toggle" => "collapse", :href => "#collapse3"}
        %img{:src => "/assets/menu_icons/tables.png"} Tables
      %ul#collapse3.accordion-body.collapse
        %li
          %a{:href => "tables_static.html"} Static
        %li
          %a{:href => "tables_dynamic.html"} Dynamics
    %li.accordion-group
      %a.accordion-toggle.widgets.collapsed{"data-parent" => "#sidebar_menu", "data-toggle" => "collapse", :href => "#collapse4"}
        %img{:src => "/assets/menu_icons/statistics.png"} Charts
      %ul#collapse4.accordion-body.collapse
        %li
          %a{:href => "statistics.html"} Statistics Elements
        %li
          %a{:href => "charts.html"} Charts
    %li
      %a.widgets{"data-parent" => "#sidebar_menu", :href => "grid.html"}
        %img{:src => "/assets/menu_icons/grid.png"} Grid
    %li
      %a.widgets{"data-parent" => "#sidebar_menu", :href => "media.html"}
        %img{:src => "/assets/menu_icons/gallery.png"} Media
    %li
      %a.widgets{"data-parent" => "#sidebar_menu", :href => "file_explorer.html"}
        %img{:src => "/assets/menu_icons/gallery.png"}
          File Explorer
          %span.label.label-info.pull-right new
    %li.accordion-group
      %a.accordion-toggle.widgets.collapsed{"data-parent" => "#sidebar_menu", "data-toggle" => "collapse", :href => "#collapse5"}
        %img{:src => "/assets/menu_icons/others.png"} Specific Pages
      %ul#collapse5.accordion-body.collapse
        %li
          %a{:href => "profile.html"} Profile
        %li
          %a{:href => "search.html"} Search
        %li
          %a{:href => "index2.html"} Login
        %li
          %a{:href => "404.html"} 404 Error
  / End sidebar_box
  .sidebar_box.statistics.visible-desktop
    .container
      .title
        %i.gicon-globe
        Estimated earnings
      .row-fluid.fluid
        .span6.pagination-centered
          .row-fluid.fluid
            %i.icon-caret-up.green.medium.span3
            %span.percent.span3 7%
            %span.bar1.span6 3,4,10,5,3,6,3
          .row-fluid.fluid
            %h2
              %strong $11.37
          .row-fluid.fluid
            Today so far
        .span6.pagination-centered
          .row-fluid.fluid
            %i.icon-caret-down.red.medium.span3
            %span.percent.span3 2%
            %span.bar2.span6 1, 4, 6, 7,4, 2,4
          .row-fluid.fluid
            %h2
              %strong $22.84
          .row-fluid.fluid
            Yesterday
            %i.icon-question-sign.muted.inline{"data-original-title" => "Your total earnings accrued yesterday. This amount is an estimate that is subject to change when your earnings are verified for accuracy at the end of every month.", "data-placement" => "right", :rel => "tooltip"}
      / End .title
      .title.row-fluid.fluid
        %i.gicon-refresh
        Real time stats
      .row-fluid.fluid
        .span6.pagination-centered
          .row-fluid
            #g1.gauge
        .span6.pagination-centered
          .row-fluid.fluid
            #g2.gauge
        / End row-fluid
        .row-fluid.fluid
          #real-time-sidebar{:style => "width:100%;height:65px;"}
        .row-fluid.fluid.pagination-centered
          Page views
          %i.icon-question-sign.muted.inline{"data-original-title" => "As an interesting side note, as a head without a body, I envy the dead. There's one way and only one way to determine if an animal is intelligent.", "data-placement" => "right", :rel => "tooltip"}
      / End .title
  / End sidebar_box
#main
  .container
    #container2
      .row-fluid
        %ul.row-fluid.fluid.general_statistics.hidden-phone
          %li.box.gradient.span4
            %a
              .icon
                %img{:src => "/assets/general/arrow_up.png"}
                  %img.hover{:src => "/assets/general/arrow_up2.png"}
              .heading
                = @today_counts[:positive]
              .desc
                Positive Tweets
          %li.box.gradient.span4
            %a
              .icon
                %img{:src => "/assets/general/comment.png"}
                  %img.hover{:src => "/assets/general/comment2.png"}
              .heading
                = @today_counts[:neutral]
              .desc
                Neutral Tweets
          %li.box.gradient.span4
            %a
              .icon
                %img{:src => "/assets/general/arrow_down.png"}
                  %img.hover{:src => "/assets/general/arrow_down2.png"}
              .heading
                = @today_counts[:negative]
              .desc
                Negative Tweets
      .row-fluid
        .box.gradient
          .title
            .row-fluid
              .span6
                %h4
                  %i.icon-bar-chart
                  %span Last #{time_ago_in_words(@first_pie_chart_tweet)} of tweets
              / End .span6
            / End .row-fluid
          / End .title
          .content
            #placeholder{:style => "width:100%;height:350px;"}
        / End .box
      / End .row-fluid
      .row-fluid
        .span8.box.gradient
          .row-fluid
            .title
              %h4
                %i.icon-eye-open
                %span Latest comments
            / End .title
            .content
              %ul.messages_layout
                - @tweets.each do |tweet|
                  %li.from_user.left
                    = link_to "http://twitter.com/#{tweet.user.screen_name}", :target => "_blank", :class => "avatar" do
                      = image_tag tweet.user.profile_image_url
                    .message_wrap
                      %span.arrow
                      .info
                        %a.name
                          = tweet.user.name
                        %span.time
                          = time_ago_in_words(tweet.tweeted_at)
                          ago
                      .text
                        = tweet.text
                      .text.small
                        We rated this as
                        %span{:class => tweet.classification.downcase}
                          = tweet.classification
                        but we're still training the databsae
        .span4
          .box.gradient
            .title.row-fluid.fluid
              %h4.span6
                %i.icon-eye-open
                %span
                  Overall Perception
            / End .title
            .content.row-fluid
              #donut.graph{:style => "width:100%;height:300px;"}
            / End .content
          / End .box
        / End .span4
      / End .row-fluid

    / End #container
  #footer
    %p
      \Â© Bird Admin Template 2012
    %span.company_logo
      %a{:href => "http://www.pixelgrade.com"}
/ /container
/
  Le javascript
  \==================================================
/ Placed at the end of the document so the pages load faster
%script{:src => "/assets/jquery.js"}
%script{:language => "javascript", :src => "/assets/plugins/jquery.sparkline.min.js", :type => "text/javascript"}
%script{:src => "/assets/plugins/excanvas.compiled.js"}
%script{:src => "/assets/bootstrap-transition.js"}
%script{:src => "/assets/bootstrap-alert.js"}
%script{:src => "/assets/bootstrap-modal.js"}
%script{:src => "/assets/bootstrap-dropdown.js"}
%script{:src => "/assets/bootstrap-scrollspy.js"}
%script{:src => "/assets/bootstrap-tab.js"}
%script{:src => "/assets/bootstrap-tooltip.js"}
%script{:src => "/assets/bootstrap-popover.js"}
%script{:src => "/assets/bootstrap-button.js"}
%script{:src => "/assets/bootstrap-collapse.js"}
%script{:src => "/assets/bootstrap-carousel.js"}
%script{:src => "/assets/bootstrap-typeahead.js"}
%script{:src => "/assets/fileinput.jquery.js"}
%script{:src => "/assets/jquery-ui-1.8.23.custom.min.js"}
%script{:src => "/assets/jquery.touchdown.js"}
%script{:language => "javascript", :src => "/assets/plugins/flot/jquery.flot.js", :type => "text/javascript"}
%script{:language => "javascript", :src => "/assets/plugins/flot/jquery.flot.stack.js", :type => "text/javascript"}
%script{:language => "javascript", :src => "/assets/plugins/flot/jquery.flot.pie.js", :type => "text/javascript"}
%script{:language => "javascript", :src => "/assets/plugins/flot/jquery.flot.resize.js", :type => "text/javascript"}
%script{:language => "javascript", :src => "/assets/plugins/jquery.peity.min.js", :type => "text/javascript"}
%script{:language => "javascript", :src => "/assets/plugins/datatables/js/jquery.dataTables.js", :type => "text/javascript"}
%script{:src => "/assets/plugins/justGage.1.0.1/resources/js/raphael.2.1.0.min.js"}
%script{:src => "/assets/plugins/justGage.1.0.1/resources/js/justgage.1.0.1.min.js"}
%script{:language => "javascript", :src => "/assets/plugins/full-calendar/fullcalendar.min.js", :type => "text/javascript"}
%script{:src => "/assets/scripts.js"}
%script{:language => "javascript", :src => "/assets/jnavigate.jquery.min.js", :type => "text/javascript"}

:javascript
  $(window).load(function () {
    $('#loading').fadeOut();
  });
  $(document).ready(function () {
    $('body').css('display', 'none');
    $('body').fadeIn(500);


    $("#logo a, #sidebar_menu a:not(.accordion-toggle), a.ajx").click(function () {
      event.preventDefault();
      newLocation = this.href;
      $('body').fadeOut(500, newpage);
    });

    function newpage() {
      window.location = newLocation;
    }

  });
  $(document).ready(function () {
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    var calendar = $('#calendar').fullCalendar({
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
      },
      selectable: true,
      selectHelper: true,
      select: function (start, end, allDay) {
        var title = prompt('Event Title:');
        if (title) {
          calendar.fullCalendar('renderEvent', {
            title: title,
            start: start,
            end: end,
            allDay: allDay
          },
          true // make the event "stick"
          );
        }
        calendar.fullCalendar('unselect');
      },
      editable: true,
      events: [{
        title: 'All Day Event',
        start: new Date(y, m, 1)
      }, {
        title: 'Long Event',
        start: new Date(y, m, d + 5),
        end: new Date(y, m, d + 7)
      }, {
        id: 999,
        title: 'Repeating Event',
        start: new Date(y, m, d - 3, 16, 0),
        allDay: false
      }, {
        id: 999,
        title: 'Repeating Event',
        start: new Date(y, m, d + 4, 16, 0),
        allDay: false
      }, {
        title: 'Meeting',
        start: new Date(y, m, d, 10, 30),
        allDay: false
      }, {
        title: 'Lunch',
        start: new Date(y, m, d, 12, 0),
        end: new Date(y, m, d, 14, 0),
        allDay: false
      }, {
        title: 'Birthday Party',
        start: new Date(y, m, d + 1, 19, 0),
        end: new Date(y, m, d + 1, 22, 30),
        allDay: false
      }, {
        title: 'Click for PixelGrade',
        start: new Date(y, m, 28),
        end: new Date(y, m, 29),
        url: 'http://pixelgrade.com/'
      }]
    });
  });

:javascript
  $(document).ready(function() {
    var dontSort = [];
              $('#datatable_example thead th').each( function () {
                  if ( $(this).hasClass( 'no_sort' )) {
                      dontSort.push( { "bSortable": false } );
                  } else {
                      dontSort.push( null );
                  }
    } );
    $('#datatable_example').dataTable( {
      "sDom": "<'row table_top_bar'<'row-fluid'>'<'to_hide_phone'>'f'<'>r>t<'row'>",
       "sDom": "<'row table_top_bar'<'row-fluid'<'to_hide_phone' f>>><'row'>",
      "aaSorting": [[ 4, "asc" ]],
      "bPaginate": false,
      "bJQueryUI": false,
      "aoColumns": dontSort
    } );
    $.extend( $.fn.dataTableExt.oStdClasses, {
      "s`": "dataTables_wrapper form-inline"
    } );
  } );

:javascript
  $(function () {

    var plot = $.plot($("#placeholder"), [{
      data: [#{@line_graph_data[:negative].keys.map{|k| "[#{k},#{@line_graph_data[:negative][k]}]"}.join(",")}],
      label: "Negative",
      color: "#ef4723",
      shadowSize: 0
    }, {
      data: [#{@line_graph_data[:positive].keys.map{|k| "[#{k},#{@line_graph_data[:positive][k]}]"}.join(",")}],
      label: "Positive",
      color: "#a1d14d",
      shadowSize: 0
    }, {
      data: [#{@line_graph_data[:neutral].keys.map{|k| "[#{k},#{@line_graph_data[:neutral][k]}]"}.join(",")}],
      label: "Neutral",
      color: "#4a8cf7",
      shadowSize: 0
    }], {
      series: {
        lines: {
          show: true,
          fill: true
        },
        points: {
          show: true,
          fill: true
        },
      },
      grid: {
        hoverable: true,
        clickable: true,
        autoHighlight: false,
        borderWidth: 0,
        backgroundColor: {
          colors: ["#fff", "#fbfbfb"]
        }
      },
    });

    function showTooltip(x, y, contents) {
      $('<div id="tooltip">' + contents + '</div>').css({
        position: 'absolute',
        display: 'none',
        top: y + 5,
        left: x + 5,
        border: '1px solid #ccc',
        padding: '2px 6px',
          'background-color': '#fff',
        opacity: 0.80
      }).appendTo("body").fadeIn(200);
    }
    var previousPoint = null;
    $("#placeholder").bind("plothover", function (event, pos, item) {
      $("#x").text(pos.x.toFixed(2));
      $("#y").text(pos.y.toFixed(2));
      if (item) {
        if (previousPoint != item.dataIndex) {
          previousPoint = item.dataIndex;
          $("#tooltip").remove();
          var x = item.datapoint[0].toFixed(2),
            y = item.datapoint[1].toFixed(2);
          showTooltip(item.pageX, item.pageY,
          item.series.label + " of " + x + " = " + y);
        }
      }
    });
  });
  $(function () {
    var data = [];
    var series = Math.floor(Math.random() * 5) + 1;
    data[0] = {
      label: "Negative",
      data: #{@pie_chart_data[:negative]},
      color: "#cb4b4b"
    };
    data[1] = {
      label: "Positive",
      data: #{@pie_chart_data[:positive]},
      color: "#4da74d"
    };
    data[2] = {
      label: "Neutral",
      data: #{@pie_chart_data[:neutral]},
      color: "#4a8cf7"
    };
    // DONUT
    $.plot($("#donut"), data, {
      series: {
        pie: {
          show: true,
          innerRadius: 0.42,
          highlight: {
            opacity: 0.3
          },
          radius: 1,
          stroke: {
            color: '#fff',
            width: 4
          },
          startAngle: 0,
          combine: {
            color: '#353535',
            threshold: 0.05
          },
          label: {
            show: true,
            radius: 1,
            formatter: function (label, series) {
              return '<div class="chart-label">' + label + '&nbsp;' + Math.round(series.percent) + '%</div>';
            }
          }
        },
        grow: {
          active: false
        }
      },
      legend: {
        show: true
      },
      grid: {
        hoverable: true,
        clickable: true
      },
    });
  });
